#Область ОбработчикиСобытийЭлементовТабличнойЧастиТовары

// Обработчик события ПриИзменении поля Количество табличной части Товары.
// Пересчитывает сумму строки и итоговую сумму документа.
//
&НаКлиенте
Процедура ТоварыКоличествоПриИзменении(Элемент)
	
	ПересчитатьСуммуСтрокиИИтог();
	
КонецПроцедуры

// Обработчик события ПриИзменении поля Цена табличной части Товары.
// Пересчитывает сумму строки и итоговую сумму документа.
//
&НаКлиенте
Процедура ТоварыЦенаПриИзменении(Элемент)
	
	ПересчитатьСуммуСтрокиИИтог();
	
КонецПроцедуры

#КонецОбласти

#Область ОбработчикиСобытийФормы

// Обработчик события ПриОткрытии формы.
// Инициализирует итоговую сумму документа при открытии формы.
//
&НаКлиенте
Процедура ПриОткрытии(Отказ)
	
	ПересчитатьИтоговуюСумму();
	
КонецПроцедуры

#КонецОбласти

#Область СлужебныеПроцедурыИФункции

// Пересчитывает сумму в текущей строке табличной части Товары
// и обновляет итоговую сумму документа.
//
&НаКлиенте
Процедура ПересчитатьСуммуСтрокиИИтог()
	
	ТекСтрока = Элементы.Товары.ТекущиеДанные;
	
	Если ТекСтрока <> Неопределено Тогда
		ТекСтрока.Сумма = ТекСтрока.Количество * ТекСтрока.Цена;
	КонецЕсли;
	
	ПересчитатьИтоговуюСумму();
	
КонецПроцедуры

// Рассчитывает и заполняет итоговую сумму документа
// на основе табличной части Товары.
//
&НаКлиенте
Процедура ПересчитатьИтоговуюСумму()
	
	СуммаИтого = Объект.Товары.Итог("Сумма");
	Объект.СуммаИтого = СуммаИтого;
	Объект.ИтогоСуммаНакладной = Формат(СуммаИтого, "ЧДЦ=2; ЧРГ=' '") + " руб";
	
КонецПроцедуры

#КонецОбласти
